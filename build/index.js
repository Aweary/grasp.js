function Template(t){function e(t,n){var a=r.call(t.children,0);a.forEach(function(r){n&&n(r);var a=r.innerText.match(/#{[\w]+}/gim);a&&a.forEach(function(t){var e=i.bindings[t]={};e.element=r}),r.children?e(r):n&&n(t)})}function n(t){if(t.hasAttribute("data-repeat")){var e=t.getAttribute("data-repeat").split(" as "),n=e[0],r=e[1];i.repeatStructures[n]={identifier:r,root:t,template:t.children}}}var r=Array.prototype.slice,i=this;this.state={},this.name=t,this.bindings={},this.repeatStructures={};for(var a=r.call(document.querySelectorAll("[data-grasp-template]"),0),o=0;o<a.length;o++){var s=a[o].getAttribute("data-grasp-template");s===t&&(this._templateRoot=a[o])}if(!this._templateRoot)throw new Error("No template found for "+t);e(this._templateRoot,n)}var grasp=function(t){function e(t){var e=this;this.state={},this.rootNode=document.querySelector(t),this.append=function(t){if("string"==typeof t){var n=document.createElement("tr");n.innerHTML=t,e.rootNode.appendChild(n.firstChild)}else Array.isArray(t)&&t.forEach(function(t){e.rootNode.appendChild(t)})}}return new e(t)};grasp.template=function(t){return new Template(t)},Template.prototype.digest=function(t,e){function n(t){console.log(t);var n=Object.keys(t);n.forEach(function(t){var n="#{"+t+"}";if(console.log(n),r.bindings[n]){var i=r.bindings[n];i.value=e[t]}})}var r=this;if(!this._templateRoot)throw new Error("Digest called on unbound template");n(e)},Template.prototype.render=function(){var t=this;document.addEventListener("DOMContentLoaded",function(){Object.keys(t.bindings).forEach(function(e){var n=t.bindings[e];n.element.innerText=n.value})})};