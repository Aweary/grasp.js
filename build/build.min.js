function Template(e){function t(e){var i=r.call(e.children,0);i.length&&i.forEach(function(e){if(e.hasAttribute("data-repeat")){var r=e.getAttribute("data-repeat").split(" as "),i=r[0],o=a.digests.repeats[i]={};o.parent=e.parentNode;var l=e.parentNode.removeChild(e);return o.template=n(o,l),void(o.indentifier=r[1])}var s=e.innerText.match(/#{[\w|\.]+}/gim);s&&s.forEach(function(t){var t=t.replace(/\W/gim,"");if(a.digests[t]){var n=a.digests[t].elements;-1===n.indexOf(e)&&n.push(e)}else{var r=a.digests[t]={};r.elements=[],r.elements.push(e)}}),e.children&&t(e)})}function n(e,t){var n=r.call(t.children,0);n.forEach(function(t){var n=t.innerText.match(/#{[\w|\.]+}/gim);n.forEach(function(n){e[n]={},e[n].element=t,e[n].parent=t.parentNode,e[n].text=t.innerText})})}var r=Array.prototype.slice,a=this;this.name=e,this.data={},this.digests={},this.digests.repeats={},this.bindings=[];for(var i=r.call(document.querySelectorAll("[data-grasp-template]"),0),o=0;o<i.length;o++){var l=i[o].getAttribute("data-grasp-template");l===e&&(this._templateRoot=i[o])}if(!this._templateRoot)throw new Error("No template found for "+e);t(this._templateRoot)}Template.prototype.digest=function(e){function t(e,t){var n,r=t.parent,a=t.indentifier;e.forEach(function(e){var i=Object.keys(e);i.forEach(function(o){var l="#{"+a+"."+o+"}",s=t[l],c=e[o];n||(n=s.parent.cloneNode());var d=s.element.cloneNode();d.innerText=s.text.replace(l,c),n.appendChild(d),i.indexOf(o)===i.length-1&&(r.appendChild(n),n=null)})})}if(!this._templateRoot)throw new Error("Digest called on unbound template");var n=this.digests,r=n.repeats;Object.keys(e).forEach(function(a){if(r[a])return void t(e[a],r[a]);var i=n[a],o=i.elements;o.forEach(function(t){var n="#{"+a+"}";t.innerText=t.innerText.replace(n,e[a])})})},Template.prototype.render=function(){var e=this;document.addEventListener("DOMContentLoaded",function(){e.bindings.forEach(function(e){e.node.innerText;console.log(e)})})};var grasp=function(e){return document.querySelector(e)};grasp.template=function(e){return new Template(e)};