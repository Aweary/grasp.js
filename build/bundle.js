function Template(t){function e(t,n){var i=r.call(t.children,0);i.forEach(function(r){n&&n(r);var i=r.innerText.match(/#{[\w]+}/gim);i&&i.forEach(function(t){var e=a.bindings[t]={};e.element=r}),r.children?e(r):n&&n(t)})}function n(t){if(t.hasAttribute("data-repeat")){var e=t.getAttribute("data-repeat").split(" as "),n=e[0],r=e[1];a.repeatStructures[n]={identifier:r,root:t,template:t.children}}}var r=Array.prototype.slice,a=this;this.state={},this.name=t,this.bindings={},this.repeatStructures={};for(var i=r.call(document.querySelectorAll("[data-grasp-template]"),0),o=0;o<i.length;o++){var l=i[o].getAttribute("data-grasp-template");l===t&&(this._templateRoot=i[o])}if(!this._templateRoot)throw new Error("No template found for "+t);e(this._templateRoot,n)}Template.prototype.digest=function(t,e){function n(t){console.log(t);var n=Object.keys(t);n.forEach(function(t){var n="#{"+t+"}";if(console.log(n),r.bindings[n]){var a=r.bindings[n];a.value=e[t]}})}var r=this;if(!this._templateRoot)throw new Error("Digest called on unbound template");n(e)},Template.prototype.render=function(){var t=this;document.addEventListener("DOMContentLoaded",function(){Object.keys(t.bindings).forEach(function(e){var n=t.bindings[e];n.element.innerText=n.value})})};var grasp=function(t){return document.querySelector(t)};grasp.template=function(t){return new Template(t)};